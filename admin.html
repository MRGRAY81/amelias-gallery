<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin — Amelia’s Gallery</title>
  <meta name="description" content="Admin login and uploads for Amelia’s Gallery." />
  <link rel="stylesheet" href="./styles.css" />
  <style>
    /* Minimal page-specific layout */
    .admin-shell{max-width:1100px;margin:18px auto 28px;padding:0 16px 20px}
    .admin-grid{display:grid;grid-template-columns:360px 1fr;gap:14px;align-items:start}
    .panel{border-radius:var(--r);border:1px solid var(--stroke);background:rgba(255,255,255,.70);box-shadow:var(--shadow);padding:16px}
    .panel h2{margin:0 0 8px;font-size:18px;font-weight:950}
    .panel p{margin:0;color:var(--muted);font-weight:750}
    .form{margin-top:12px;display:grid;gap:10px}
    .row{display:grid;gap:6px}
    label{font-weight:900;color:rgba(42,37,48,.78);font-size:13px}
    input, select, textarea{
      width:100%;padding:12px 12px;border-radius:14px;border:1px solid var(--stroke);
      background:rgba(255,255,255,.82);font-weight:800;color:rgba(42,37,48,.88)
    }
    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .tiny{font-size:12px;color:var(--muted);font-weight:800;margin:8px 0 0}
    .status{margin-top:10px;font-weight:900}
    .status.ok{color:rgba(0,120,70,.95)}
    .status.bad{color:rgba(170,0,0,.95)}
    .hide{display:none !important}

    .kpi{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-top:12px}
    .kpi .cardlet{border:1px solid var(--stroke);background:rgba(255,255,255,.62);border-radius:18px;padding:12px}
    .cardlet .t{font-size:12px;color:var(--muted);font-weight:900}
    .cardlet .v{font-size:18px;font-weight:950;margin-top:4px}

    .upload-box{margin-top:12px;border:1px dashed rgba(42,37,48,.25);border-radius:18px;padding:14px;background:rgba(255,255,255,.55)}
    .upload-box .hint{margin:6px 0 0;color:var(--muted);font-weight:800}
    .file-row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .pill{padding:8px 12px;border-radius:999px;border:1px solid var(--stroke);background:rgba(255,255,255,.70);font-weight:900;color:rgba(42,37,48,.78)}
    .list{margin-top:12px;display:grid;gap:10px}
    .item{display:flex;gap:10px;align-items:center;border:1px solid var(--stroke);background:rgba(255,255,255,.62);border-radius:18px;padding:10px}
    .thumb{width:64px;height:48px;border-radius:12px;object-fit:cover;border:1px solid rgba(0,0,0,.06)}
    .meta{flex:1;min-width:0}
    .meta .name{font-weight:950}
    .meta .sub{color:var(--muted);font-weight:850;font-size:12px;margin-top:2px}
    .danger{background:rgba(240,90,90,.10);border-color:rgba(240,90,90,.25)}
    .logout{margin-left:auto}
    @media (max-width: 980px){
      .admin-grid{grid-template-columns:1fr}
      .logout{margin-left:0}
    }
  </style>
</head>
<body>
  <!-- Same top bar style (uses your CSS variables) -->
  <header class="topbar">
    <div class="brand-left">
      <!-- Keep gap for Dad’s A. Use a-dad.jpg for now -->
      <a href="./index.html" title="Back home" aria-label="Back home">
        <img src="./a-dad.jpg" alt="A (handwritten)" style="width:42px;height:42px;object-fit:contain;border-radius:12px;background:rgba(255,255,255,.72);border:1px solid var(--stroke);padding:6px;">
      </a>
    </div>

    <nav class="nav nav-buttons" aria-label="Primary">
      <a class="btnlink" href="./gallery.html">Gallery</a>
      <a class="btnlink" href="./commissions.html">Commissions</a>
      <a class="btnlink" href="./about.html">About / Contact</a>
      <a class="btnlink admin active" href="./admin.html">Admin</a>
    </nav>
  </header>

  <main class="admin-shell">
    <div class="admin-grid">

      <!-- LOGIN PANEL -->
      <section class="panel" id="loginPanel">
        <h2>Admin Login</h2>
        <p>Family-managed access only.</p>

        <form class="form" id="loginForm" autocomplete="on">
          <div class="row">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" placeholder="admin@email.com" required />
          </div>

          <div class="row">
            <label for="password">Password</label>
            <input id="password" name="password" type="password" placeholder="••••••••••••" required />
          </div>

          <div class="actions">
            <button class="btn" type="submit">Log In</button>
            <button class="pill logout hide" type="button" id="logoutBtn">Log Out</button>
          </div>

          <div class="tiny">
            This uses the backend API on Render. If the backend is “asleep” (free tier), first login can take ~30–60 seconds.
          </div>

          <div class="status" id="loginStatus" aria-live="polite"></div>
        </form>
      </section>

      <!-- DASHBOARD PANEL -->
      <section class="panel hide" id="dashPanel">
        <div style="display:flex;gap:10px;align-items:baseline;flex-wrap:wrap">
          <div>
            <h2 style="margin:0">Admin Dashboard</h2>
            <p style="margin-top:4px">Uploads + basic checks (safe family workflow).</p>
          </div>
          <button class="pill logout" type="button" id="logoutBtn2">Log Out</button>
        </div>

        <div class="kpi">
          <div class="cardlet">
            <div class="t">Auth</div>
            <div class="v" id="kpiAuth">—</div>
          </div>
          <div class="cardlet">
            <div class="t">Gallery items</div>
            <div class="v" id="kpiCount">—</div>
          </div>
          <div class="cardlet">
            <div class="t">Backend</div>
            <div class="v" id="kpiApi">—</div>
          </div>
        </div>

        <div class="upload-box">
          <h3 style="margin:0;font-size:16px;font-weight:950">Upload a new image</h3>
          <div class="hint">PNG/JPG/WEBP only. Keep it kid-safe & family-approved.</div>

          <div class="file-row">
            <input id="file" type="file" accept="image/png,image/jpeg,image/webp" />
            <input id="title" type="text" placeholder="Title (e.g., ‘Unicorn in a Meadow’)" />
            <select id="category">
              <option value="featured">Featured</option>
              <option value="animals">Animals</option>
              <option value="nature">Nature</option>
              <option value="characters">Characters</option>
              <option value="roblox">Roblox Scenes</option>
              <option value="other">Other</option>
            </select>
            <button class="btn" id="uploadBtn" type="button">Upload</button>
          </div>

          <div class="status" id="uploadStatus" aria-live="polite"></div>
          <div class="tiny">Note: “Virus checking” on a simple Node backend usually means: strict file type allow-list + size limits + storing outside executable paths. We’ll add those server-side.</div>
        </div>

        <div style="margin-top:14px;display:flex;align-items:baseline;justify-content:space-between;gap:10px;flex-wrap:wrap">
          <h3 style="margin:0;font-size:16px;font-weight:950">Latest uploads</h3>
          <button class="pill" id="refreshBtn" type="button">Refresh list</button>
        </div>

        <div class="list" id="uploadList"></div>
      </section>

    </div>
  </main>

  <script src="./admin.js"></script>
</body>
</html>
